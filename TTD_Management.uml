<?xml version="1.0" encoding="UTF-8"?>
<uml:UseCase xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xmi:id="_BCR5IBRuEeyQN9odROAPWw" name="TTD Management" classifierBehavior="_HtKesE1DEey51db6W6sgyA">
  <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_bXhFIDjZEeyQeMlHlxk6EA" source="http://www.eclipse.org/papyrus/2016/resource/shard">
    <references xmi:type="uml:Class" href="PerformingRail.uml#_av43QBIzEeyVOZB09kZL2w"/>
  </eAnnotations>
  <ownedBehavior xmi:type="uml:StateMachine" xmi:id="_HtKesE1DEey51db6W6sgyA" name="TTD_Status_SM">
    <region xmi:type="uml:Region" xmi:id="_I58a4E1DEey51db6W6sgyA" name="Region1">
      <ownedComment xmi:type="uml:Comment" xmi:id="_1FETIFONEey-6ZlVQ1gHJw">
        <body>one TTD</body>
      </ownedComment>
      <transition xmi:type="uml:Transition" xmi:id="_rFxTIE3UEeyZ9oag9282Eg" source="_WYGCEE1DEey51db6W6sgyA" target="_ZHPI4E1DEey51db6W6sgyA"/>
      <transition xmi:type="uml:Transition" xmi:id="_EOp4kE3UEeyZ9oag9282Eg" name="Detect_Train_Movement_inside_TTD_section" source="_ZHPI4E1DEey51db6W6sgyA" target="_teze8E1DEey51db6W6sgyA"/>
      <transition xmi:type="uml:Transition" xmi:id="_C9bEwE3VEeyZ9oag9282Eg" name="No_Train_Movement_inside_TTD_section" source="_teze8E1DEey51db6W6sgyA" target="_ZHPI4E1DEey51db6W6sgyA"/>
      <subvertex xmi:type="uml:Pseudostate" xmi:id="_WYGCEE1DEey51db6W6sgyA" name="Init"/>
      <subvertex xmi:type="uml:State" xmi:id="_ZHPI4E1DEey51db6W6sgyA" name="Clear"/>
      <subvertex xmi:type="uml:State" xmi:id="_teze8E1DEey51db6W6sgyA" name="Occupied"/>
    </region>
  </ownedBehavior>
  <ownedBehavior xmi:type="uml:StateMachine" xmi:id="_ZyBkUFK_EeyODuBwckM_-w" name="TTD_Management">
    <region xmi:type="uml:Region" xmi:id="_cXFiEFK_EeyODuBwckM_-w" name="Region1">
      <ownedComment xmi:type="uml:Comment" xmi:id="_3KqGoFONEey-6ZlVQ1gHJw">
        <body>all TTDs and all Position reports&#xD;
REQ-TrainLoc-12&#xD;
X2R3_Part 2 _ page 15&#xD;
X2R3 REQ TTD&#xD;
Movingrail D1.1</body>
      </ownedComment>
      <transition xmi:type="uml:Transition" xmi:id="_4-3lYFLAEeyODuBwckM_-w" name="Reset (TTD_Management Timer)" source="_5uQQYFK_EeyODuBwckM_-w" target="_vs8jgFK_EeyODuBwckM_-w"/>
      <transition xmi:type="uml:Transition" xmi:id="_Moy84FLCEeyODuBwckM_-w" source="_i9CiYFK_EeyODuBwckM_-w" target="_7zkFIFLBEeyODuBwckM_-w"/>
      <transition xmi:type="uml:Transition" xmi:id="_wTQIcHSTEey70MNaFQKawQ" source="_ozKbIHSTEey70MNaFQKawQ" target="_Ap21YHSSEey70MNaFQKawQ"/>
      <transition xmi:type="uml:Transition" xmi:id="_x6i2YHSTEey70MNaFQKawQ" source="_ozKbIHSTEey70MNaFQKawQ" target="_FnNgMHSSEey70MNaFQKawQ"/>
      <transition xmi:type="uml:Transition" xmi:id="_-cFEUHSTEey70MNaFQKawQ" name="SoM / Start (TTD_Management Timer)" source="_7zkFIFLBEeyODuBwckM_-w" target="_ozKbIHSTEey70MNaFQKawQ"/>
      <transition xmi:type="uml:Transition" xmi:id="_guANsHSaEey70MNaFQKawQ" name="TTD_Management_Timer = DEFINED_VALUE" source="_2YzxcHSTEey70MNaFQKawQ" target="_5uQQYFK_EeyODuBwckM_-w"/>
      <subvertex xmi:type="uml:Pseudostate" xmi:id="_i9CiYFK_EeyODuBwckM_-w"/>
      <subvertex xmi:type="uml:State" xmi:id="_vs8jgFK_EeyODuBwckM_-w" name="Receive Report">
        <connectionPoint xmi:type="uml:Pseudostate" xmi:id="_ozKbIHSTEey70MNaFQKawQ" kind="entryPoint"/>
        <connectionPoint xmi:type="uml:Pseudostate" xmi:id="_2YzxcHSTEey70MNaFQKawQ" name="ExitPoint4" kind="exitPoint"/>
        <region xmi:type="uml:Region" xmi:id="_wgu1sHSREey70MNaFQKawQ" name="Region1">
          <transition xmi:type="uml:Transition" xmi:id="_1bTDgHSXEey70MNaFQKawQ" name="TPR_receipt (TPR) / Update (TPR, timestamp)" source="_Ap21YHSSEey70MNaFQKawQ" target="_Ap21YHSSEey70MNaFQKawQ"/>
          <subvertex xmi:type="uml:State" xmi:id="_Ap21YHSSEey70MNaFQKawQ" name="Wait Train Position Report"/>
        </region>
        <region xmi:type="uml:Region" xmi:id="_6PlgoHSREey70MNaFQKawQ" name="Region2">
          <transition xmi:type="uml:Transition" xmi:id="_Lt_XkHSaEey70MNaFQKawQ" name="TTDR_receipt (TTDR) / update (TTDR, timestamp, TTD_SATATUS)" source="_FnNgMHSSEey70MNaFQKawQ" target="_FnNgMHSSEey70MNaFQKawQ"/>
          <subvertex xmi:type="uml:State" xmi:id="_FnNgMHSSEey70MNaFQKawQ" name="Wait Trackside Train Detection Report"/>
        </region>
      </subvertex>
      <subvertex xmi:type="uml:State" xmi:id="_5uQQYFK_EeyODuBwckM_-w" name="Synchronisation between TTD occupancy and TPR for each train">
        <connectionPoint xmi:type="uml:Pseudostate" xmi:id="_tAXHAHUlEeyc962K-4AASw" name="EntryPoint3" kind="entryPoint"/>
        <region xmi:type="uml:Region" xmi:id="_ZLexEHSSEey70MNaFQKawQ" name="Region1">
          <transition xmi:type="uml:Transition" xmi:id="_2EtqIHUqEeyc962K-4AASw" source="_VMLqsHUmEeyc962K-4AASw" target="_wjn1kHUpEeyc962K-4AASw"/>
          <transition xmi:type="uml:Transition" xmi:id="_6eCa0HUqEeyc962K-4AASw" guard="_I3vrUHUrEeyc962K-4AASw" source="_wjn1kHUpEeyc962K-4AASw" target="_x1d38HUpEeyc962K-4AASw">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_I3vrUHUrEeyc962K-4AASw">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_I3vrUXUrEeyc962K-4AASw" value="true"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_8WiNgHUqEeyc962K-4AASw" guard="_dWA98HU5Eeyc962K-4AASw" source="_x1d38HUpEeyc962K-4AASw" target="_mmKRcHUqEeyc962K-4AASw">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_dWA98HU5Eeyc962K-4AASw">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_dWA98XU5Eeyc962K-4AASw" value="true"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_-C3McHUqEeyc962K-4AASw" guard="_hGdwwHU5Eeyc962K-4AASw" source="_mmKRcHUqEeyc962K-4AASw" target="_zXAjMHUpEeyc962K-4AASw">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_hGdwwHU5Eeyc962K-4AASw">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_hGdwwXU5Eeyc962K-4AASw" value="true"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_MljG4HU4Eeyc962K-4AASw" name="train = following(train)" source="_zXAjMHUpEeyc962K-4AASw" target="_wjn1kHUpEeyc962K-4AASw"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_VMLqsHUmEeyc962K-4AASw" name="Verify Rear Train Occupancy"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_wjn1kHUpEeyc962K-4AASw" name="TTD_STATUS(TTD(MaxSRE(Train)))==OCCUPIED" kind="choice"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_x1d38HUpEeyc962K-4AASw" name="TTD_STATUS(TDD(MinSRE(Train)))==FREE" kind="choice"/>
          <subvertex xmi:type="uml:State" xmi:id="_zXAjMHUpEeyc962K-4AASw" name="send(Track_Status_Management, Clear(Track_Status( TTD(MinSRE(Train) ), train) ) )"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_mmKRcHUqEeyc962K-4AASw" name="Track Area length >= train length" kind="choice"/>
        </region>
        <region xmi:type="uml:Region" xmi:id="_HiXR8HUZEeyO5v1ny_QVKg" name="Region2">
          <transition xmi:type="uml:Transition" xmi:id="_cXDW8HUbEeyO5v1ny_QVKg" guard="_joY2kHUbEeyO5v1ny_QVKg" source="_U7DU4HUaEeyO5v1ny_QVKg" target="_41-EEHUaEeyO5v1ny_QVKg">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_joY2kHUbEeyO5v1ny_QVKg">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_joY2kXUbEeyO5v1ny_QVKg" value="true"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_q6Rv0HUbEeyO5v1ny_QVKg" source="_lyJ_cHUbEeyO5v1ny_QVKg" target="_U7DU4HUaEeyO5v1ny_QVKg"/>
          <transition xmi:type="uml:Transition" xmi:id="_j-yH4HUcEeyO5v1ny_QVKg" guard="_6Pr2wHUfEeyO5v1ny_QVKg" source="_41-EEHUaEeyO5v1ny_QVKg" target="_C1ts4HUqEeyc962K-4AASw">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_6Pr2wHUfEeyO5v1ny_QVKg">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_6Pr2wXUfEeyO5v1ny_QVKg" value="true"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_lXlt4HUcEeyO5v1ny_QVKg" name=" next_train(train)" source="_z-SuAHUbEeyO5v1ny_QVKg" target="_U7DU4HUaEeyO5v1ny_QVKg"/>
          <transition xmi:type="uml:Transition" xmi:id="_lpye4HUhEeyO5v1ny_QVKg" name="train ++" guard="_SHFe0HUiEeyO5v1ny_QVKg" source="_U7DU4HUaEeyO5v1ny_QVKg" target="_U7DU4HUaEeyO5v1ny_QVKg">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_SHFe0HUiEeyO5v1ny_QVKg">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_SHFe0XUiEeyO5v1ny_QVKg"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_pCPzAHUiEeyO5v1ny_QVKg" name="train = next_train(train)" guard="_tPTCQHUiEeyO5v1ny_QVKg" source="_41-EEHUaEeyO5v1ny_QVKg" target="_U7DU4HUaEeyO5v1ny_QVKg">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_tPTCQHUiEeyO5v1ny_QVKg">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_tPTCQXUiEeyO5v1ny_QVKg"/>
            </ownedRule>
          </transition>
          <transition xmi:type="uml:Transition" xmi:id="_P_FW4HUqEeyc962K-4AASw" guard="_Va3DEHUqEeyc962K-4AASw" source="_C1ts4HUqEeyc962K-4AASw" target="_z-SuAHUbEeyO5v1ny_QVKg">
            <ownedRule xmi:type="uml:Constraint" xmi:id="_Va3DEHUqEeyc962K-4AASw">
              <specification xmi:type="uml:LiteralBoolean" xmi:id="_Va3DEXUqEeyc962K-4AASw" value="true"/>
            </ownedRule>
          </transition>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_U7DU4HUaEeyO5v1ny_QVKg" name="TTD_STATUS(TTD(MaxSFE(Train)))==CLEAR" kind="choice"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_41-EEHUaEeyO5v1ny_QVKg" name="TTD_STATUS(TDD(MinSFE(Train)))==OCCUPIED" kind="choice"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_lyJ_cHUbEeyO5v1ny_QVKg" name="Verify Front Train Occupancy"/>
          <subvertex xmi:type="uml:State" xmi:id="_z-SuAHUbEeyO5v1ny_QVKg" name="send(Track_Status_Management, Clear(Track_Status( TTD(MaxSFE(Train) ), train) ) )"/>
          <subvertex xmi:type="uml:Pseudostate" xmi:id="_C1ts4HUqEeyc962K-4AASw" name="Track Area length >= train length" kind="choice"/>
        </region>
      </subvertex>
      <subvertex xmi:type="uml:State" xmi:id="_7zkFIFLBEeyODuBwckM_-w" name="Idle"/>
    </region>
  </ownedBehavior>
  <ownedBehavior xmi:type="uml:StateMachine" xmi:id="_fEJ40HSLEey70MNaFQKawQ" name="New_TTD_Management">
    <region xmi:type="uml:Region" xmi:id="_g_NQQHSLEey70MNaFQKawQ" name="Region1">
      <subvertex xmi:type="uml:State" xmi:id="_6bCfgHSNEey70MNaFQKawQ" name="Verify Front Train Occupancy"/>
      <subvertex xmi:type="uml:Pseudostate" xmi:id="_it-X0HSOEey70MNaFQKawQ" name="MaxSFE (train) in Clear TTD" kind="choice"/>
      <subvertex xmi:type="uml:Pseudostate" xmi:id="_7WV0sHSOEey70MNaFQKawQ" name="MinSFE (train) in Occupied TTD" kind="choice"/>
    </region>
  </ownedBehavior>
</uml:UseCase>
